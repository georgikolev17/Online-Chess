@page "/startgame"
@inject Blazored.SessionStorage.ISessionStorageService sessionStorage
@using System.Threading;
@using WebApiTest.Classes;
<h3>StartGame</h3>

@code
{
    public Task<Game> Game { get; set; }
    protected override void OnInitialized()
    {
        sessionStorage.SetItemAsync("game2", new Game());
        Game = sessionStorage.GetItemAsync<Game>("game2");
    }


    private string ChoosePiece(char piece)
    {
        switch (piece)
        {
            case 'K':
                return "whiteKing";
            case 'Q':
                return "whiteQueen";
            case 'B':
                return "whiteBishop";
            case 'N':
                return "whiteNight";
            case 'R':
                return "whiteRook";
            case 'P':
                return "whitePawn";
            case 'k':
                return "blackKing";
            case 'q':
                return "BlackQueen";
            case 'b':
                return "blackBishop";
            case 'n':
                return "blackNight";
            case 'r':
                return "blackRook";
            case 'p':
                return "blackPawn";
            default:
                return null;
        }
    }
}

<!--@if (Game != null)
{
    <div>Game:</div>
    <table border="1">
        @for (int row = 0; row < 8; row++)
        {
            <tr>
                @for (int col = 0; col < 8; col++)
                {
                    string str = $"css/images/{ChoosePiece(Game.Chessboard[row][col])}.png";
                    if ((row + col) % 2 != 0)
                    {
                        <td class="square black">
                            @if (Game.Chessboard[row][col] != ' ')
                            {
                                <div>S</div>
                                <img src=@str />
                            }
                        </td>
                    }
                    else
                    {
                        <td class="square white">
                            @if (Game.Chessboard[row][col] != ' ')
                            {
                                <img src=@str />
                            }
                        </td>
                    }

                }
            </tr>
        }
    </table>
}-->
<div>@Game.Result.Chessboard</div>

<style>
    .square {
        width: 70px;
        height: 70px;
        text-align: center;
    }

    .black {
        background-color: saddlebrown;
    }

    .white {
        background-color: white;
    }
</style>

<!--<input type="text" id="fromPosition" @bind-value="FromPosition" />
<input type="text" id="toPosition" @bind-value="ToPosition" />
<button @onclick=@ButtonMoveClicked>Move</button>-->
